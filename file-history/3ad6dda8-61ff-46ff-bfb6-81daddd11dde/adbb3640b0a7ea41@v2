# Project Cleanup Plan

**Date**: 2025-10-17
**Status**: Recommended actions after authentication implementation

---

## Scripts Cleanup

### Keep (Production)
- `scripts/setup/final_auth.py` - Production authentication (v1.0.0)
- `scripts/playwright/reconnaissance.py` - Form discovery
- `scripts/playwright/analyze_signin.py` - Analysis utilities

### Keep (Research)
- `scripts/setup/spike_complete_auth.py` - Extreme logging for debugging (23K, valuable reference)

### Archive (Superseded)
Move to `scripts/setup/archive/`:
- `generate_auth_state.py` - Original manual auth (superseded by final_auth.py)
- `password_auth.py` - Incomplete password-only implementation
- `automated_passkey_auth.py` - Incomplete passkey implementation
- `complete_auth.py` - Incomplete multi-step auth
- `complete_mfa.py` - Incomplete MFA completion

**Action**:
```bash
mkdir -p /Users/terryli/own/insurance/scripts/setup/archive
mv /Users/terryli/own/insurance/scripts/setup/{generate_auth_state,password_auth,automated_passkey_auth,complete_auth,complete_mfa}.py \
   /Users/terryli/own/insurance/scripts/setup/archive/
```

---

## Artifacts Cleanup

### Keep (Reference)
- `signin_analysis_2025-10-17_14-44-18/` - Initial signin analysis
- `spike_auth_20251017_150703/` - First successful auth (research artifact)
- `final_auth_20251017_153205/` - Successful production auth
- `reconnaissance_2025-10-17_15-32-41/` - Successful reconnaissance

### Delete (Failed Attempts)
- `complete_mfa_20251017_152745/` - Failed MFA attempt
- `final_auth_20251017_152208/` - Failed (validation error)
- `final_auth_20251017_152801/` - Failed (validation error)
- `final_auth_20251017_152918/` - Failed (validation error)
- `reconnaissance_2025-10-17_15-26-20/` - Failed (redirected to login)

**Action**:
```bash
cd /Users/terryli/own/insurance/artifacts
rm -rf complete_mfa_20251017_152745 \
       final_auth_20251017_152208 \
       final_auth_20251017_152801 \
       final_auth_20251017_152918 \
       reconnaissance_2025-10-17_15-26-20
```

**Space Saved**: ~30-50MB

---

## Documentation Status

### Complete (v1.0.0)
- `/docs/workflows/authentication-implementation.md` - Production implementation
- `/docs/analysis/manulife-signin-flow.md` - Signin flow analysis
- `/docs/research/cdp-webauthn-reference.md` - WebAuthn API reference
- `/docs/decisions/stagehand-evaluation.md` - Stagehand evaluation
- `/docs/AUDIT.md` - Playwright API verification

### Update Needed
- `/docs/workflows/authentication-setup.md` - References old `generate_auth_state.py`, needs update to reference `final_auth.py`

---

## Next Steps

### Immediate (Session Active)
1. Analyze reconnaissance artifacts (trace, HAR, DOM, ARIA)
2. Document form field structure
3. Update `specifications/manulife-par-form.yaml` with verified fields

### Future (New Session)
1. Implement `fill_par_form.py` based on reconnaissance findings
2. Test dry-run mode (SUBMIT=false)
3. Test live submission (SUBMIT=true)

---

## File Hierarchy Summary

**After cleanup**:
```
scripts/
├── setup/
│   ├── __init__.py
│   ├── final_auth.py              # Production (v1.0.0)
│   ├── spike_complete_auth.py     # Research/debug reference
│   └── archive/                   # Superseded scripts
│       ├── generate_auth_state.py
│       ├── password_auth.py
│       ├── automated_passkey_auth.py
│       ├── complete_auth.py
│       └── complete_mfa.py
└── playwright/
    ├── __init__.py
    ├── reconnaissance.py
    ├── analyze_signin.py
    └── fill_par_form.py           # To be implemented

artifacts/
├── signin_analysis_2025-10-17_14-44-18/    # Reference
├── spike_auth_20251017_150703/              # Research
├── final_auth_20251017_153205/              # Production success
└── reconnaissance_2025-10-17_15-32-41/      # Production success
```

---

## Rationale

**Archive vs Delete Scripts**:
- Archive incomplete implementations for reference
- Keep research/spike artifacts with extreme logging
- Single production script as source of truth

**Artifact Retention**:
- Keep successful runs only (production + research)
- Delete failed attempts (debugging noise)
- Retain initial analysis artifacts

**Space vs Reference Trade-off**:
- Failed artifacts: ~30-50MB (low value, delete)
- Archived scripts: ~40KB (high reference value, keep)
- Research artifacts: ~5-10MB (high debugging value, keep)

---

## Revision History

| Version | Date | Changes |
|---------|------|---------|
| 1.0.0 | 2025-10-17 | Initial cleanup plan |
