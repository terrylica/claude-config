#!/bin/bash
# Test raw OSC 52 without any wrappers

echo "Testing raw OSC 52 escape sequence..."
echo ""

if [ -n "$TMUX" ]; then
  echo "⚠️  You're in tmux. This test needs to run OUTSIDE tmux first."
  echo "   Exit tmux with: Ctrl+b d"
  echo "   Then run this script again."
  exit 1
fi

echo "Sending test string via OSC 52..."
printf '\033]52;c;%s\a' "$(echo -n 'Raw OSC52 test!' | base64)"

echo ""
echo "✅ Escape sequence sent."
echo ""
echo "Now try pasting (⌘V) on your Mac."
echo "Expected: 'Raw OSC52 test!'"
echo ""
echo "If nothing pastes, OSC 52 is not enabled in Ghostty."
