# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Purpose

mpv media player knowledge base - configuration, stream detection/download tools, and macOS integration.

## Quick Reference

```bash
# Local playback
mpv /path/to/video.mkv

# Stream playback (yt-dlp via ytdl_hook)
mpv "https://youtube.com/watch?v=..."

# Set default app for format
duti -s io.mpv mkv all
```

## System Configuration

**Installation**:
- CLI: `/opt/homebrew/bin/mpv` (v0.40.0, Homebrew formula)
- GUI: `/Applications/mpv.app` (Bundle ID: `io.mpv`, Homebrew cask `stolendata-mpv`)

**Config**: `~/.config/mpv/mpv.conf` - Auto-resume, hardware acceleration, cache, screenshots

## Video Stream Detection & Download

**Comprehensive Guide**: [`downie-alternatives-setup-guide.md`](downie-alternatives-setup-guide.md)

**Toolchain**: yt-dlp (universal), Streamlink (live), N_m3u8DL-RE (HLS/DASH), The Stream Detector (browser)

**Essential Commands**:
```bash
# Install
brew install yt-dlp ffmpeg streamlink

# Download
yt-dlp "https://example.com/video"

# Live stream
streamlink --player mpv "https://twitch.tv/channel" best

# Authenticated content
yt-dlp --cookies-from-browser firefox "https://site.com/video"
```

## Resources

- **Official**: https://mpv.io/manual/stable/
- **Wiki**: https://github.com/mpv-player/mpv/wiki
- **Config**: `~/.config/mpv/` (input bindings, Lua/JS scripts)
