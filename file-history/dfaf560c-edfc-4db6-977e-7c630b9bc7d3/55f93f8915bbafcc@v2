#!/bin/bash
# Session ID Display Hook - Appends session ID to Claude Code responses
# Uses systemMessage field with default system color

# Debug logging
echo "[$(date '+%Y-%m-%d %H:%M:%S.%3N')] session_id_display.sh invoked, PID=$$, PPID=$PPID" >> /tmp/session_id_debug.log

# Read hook input from stdin
input_data=$(cat)

# Extract session ID from hook input
session_id=$(echo "$input_data" | jq -r '.session_id // "unknown"')

# Log the session ID
echo "[$(date '+%Y-%m-%d %H:%M:%S.%3N')] Session ID: $session_id" >> /tmp/session_id_debug.log

# Output JSON with systemMessage to display to user (no color codes)
jq -n --arg sid "$session_id" '{
  "systemMessage": ("Session ID: " + $sid),
  "continue": true,
  "suppressOutput": false
}'
