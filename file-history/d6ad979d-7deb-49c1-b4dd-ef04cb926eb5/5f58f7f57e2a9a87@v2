# Manulife Par Form - Complete Field Catalog

**Version**: 1.0.0
**Date**: 2025-10-17
**Status**: Complete field inventory from visual inspection
**Source**: `artifacts/test_explore_complete_form_journey/016_page_2_initial.aria.yaml`

---

## Product Selection Section

### Product (Combobox)
- **Accessible Name**: "Product"
- **Type**: `combobox`
- **Required**: Yes
- **Options**:
  - "Select" (disabled, default)
  - "Family Term"
  - "Lifecheque"
  - "Manulife Guaranteed Issue Life"
  - "Manulife Par"
  - "Manulife UL"
- **Test Value**: "Manulife Par"

### Vitality Plus (Checkbox)
- **Accessible Name**: "with Vitality Plus™"
- **Type**: `checkbox`
- **Required**: No
- **Test Value**: Unchecked

### Illustration Upload Method (Radiogroup)
- **Accessible Name**: "An Illustration is required for Manulife Par. When would you like to upload your illustration? tooltip"
- **Type**: `radiogroup`
- **Required**: Yes (for Manulife Par product)
- **Options**:
  - "Upload Now"
  - "Upload Later"
- **Test Value**: "Upload Later"
- **Notes**: Required specifically for Manulife Par product

---

## Coverage Selection - Insured Person 1

### First Name (Textbox)
- **Accessible Name**: "First name"
- **Type**: `textbox`
- **Required**: Yes
- **Test Value**: "John"

### Middle Initial (Textbox)
- **Accessible Name**: "Middle initial (optional)"
- **Type**: `textbox`
- **Required**: No
- **Test Value**: Empty

### Last Name (Textbox)
- **Accessible Name**: "Last name"
- **Type**: `textbox`
- **Required**: Yes
- **Test Value**: "Doe"

### Sex (Radiogroup)
- **Accessible Name**: "Sex"
- **Type**: `radiogroup`
- **Required**: Yes
- **Options**:
  - "Male"
  - "Female"
- **Test Value**: "Male"

### Date of Birth - Day (Textbox)
- **Accessible Name**: "Day (dd)"
- **Type**: `textbox`
- **Group**: "Date of birth"
- **Required**: Yes
- **Format**: dd (2 digits)
- **Test Value**: "15"

### Date of Birth - Month (Combobox)
- **Accessible Name**: "Month"
- **Type**: `combobox`
- **Group**: "Date of birth"
- **Required**: Yes
- **Options**:
  - "Select" (disabled, default)
  - "January"
  - "February"
  - "March"
  - "April"
  - "May"
  - "June"
  - "July"
  - "August"
  - "September"
  - "October"
  - "November"
  - "December"
- **Test Value**: "January"

### Date of Birth - Year (Textbox)
- **Accessible Name**: "Year (yyyy)"
- **Type**: `textbox`
- **Group**: "Date of birth"
- **Required**: Yes
- **Format**: yyyy (4 digits)
- **Test Value**: "1980"

### Insurance Age (Textbox)
- **Accessible Name**: "Insurance ageLearn more"
- **Type**: `textbox`
- **Required**: No (auto-calculated)
- **Test Value**: "46"
- **Notes**: Auto-calculated from date of birth

### Illustrated Smoking Status (Combobox)
- **Accessible Name**: "Illustrated smoking status"
- **Type**: `combobox`
- **Required**: Yes
- **Options**:
  - "Select" (disabled, default)
  - "Smoker"
  - "Non-Smoker"
- **Test Value**: "Non-Smoker"
- **Critical**: Use exact accessible name to avoid product dropdown bug

---

## Coverage Selection - Coverage

### Coverage Type (Combobox)
- **Accessible Name**: "Coverage type"
- **Type**: `combobox`
- **Required**: Yes
- **Options**:
  - "Select" (disabled, default)
  - "Single"
- **Test Value**: "Single"
- **Notes**: Options may vary by product

### Premium Duration (Combobox)
- **Accessible Name**: "Premium Duration"
- **Type**: `combobox`
- **Required**: Yes
- **Options**:
  - "Select" (disabled, default)
  - "Pay for 10 years"
  - "Pay for 20 years"
  - "Pay to age 90"
  - "Pay to age 100"
- **Test Value**: "Pay for 10 years"
- **Notes**: Product-specific field (Manulife Par)

### Amount of Insurance (Textbox)
- **Accessible Name**: "Amount of insurance, dollar"
- **Type**: `textbox`
- **Required**: Yes
- **Format**: Numeric with comma separators
- **Test Value**: "100,000"
- **Notes**: Dollar sign ($) displayed as prefix

### Dividend Option (Combobox)
- **Accessible Name**: "Dividend option"
- **Type**: `combobox`
- **Required**: Yes
- **Options**:
  - "Select" (disabled, default)
  - "Paid-up insurance"
  - "Cash"
- **Test Value**: "Paid-up insurance"
- **Notes**: Product-specific field (Manulife Par)

---

## Coverage Selection - Riders

### Add Riders (Radiogroup)
- **Accessible Name**: "Would you like to add riders or benefits to this policy?"
- **Type**: `radiogroup`
- **Required**: Yes
- **Options**:
  - "Yes"
  - "No"
- **Test Value**: Not selected (shows "Required" alert)
- **ARIA**: Shows `alert: Required` when unfilled

---

## Policy Questions

### Quebec Policy (Radiogroup)
- **Accessible Name**: None (unlabeled radiogroup)
- **Question Text**: "Will the policy be issued in Quebec?"
- **Type**: `radiogroup`
- **Required**: Yes
- **Options**:
  - "Yes"
  - "No"
- **Test Value**: "No"
- **Selector Strategy**: Navigate via question text + parent traversal

### Additional Products (Radiogroup)
- **Accessible Name**: "Are you applying for additional products with this application?"
- **Type**: `radiogroup`
- **Required**: Yes
- **Options**:
  - "Yes"
  - "No"
- **Test Value**: "No"

### Medical Information Method (Radiogroup)
- **Accessible Name**: None (unlabeled radiogroup)
- **Question Text**: "Would all the people to be insured like to provide their medical information on this application or through a telephone interview?"
- **Type**: `radiogroup`
- **Required**: Yes
- **Options**:
  - "On this electronic application"
  - "A tele-interview"
- **Test Value**: "On this electronic application"
- **Selector Strategy**: Navigate via question text + parent traversal

---

## Form Actions

### Add Another Insured (Button)
- **Accessible Name**: "Add another primary insured to the policy"
- **Type**: `button`
- **Action**: Adds another insured person section to the form

### Start Application (Button)
- **Accessible Name**: "Start a new application"
- **Type**: `button`
- **State**: Disabled until all required fields filled
- **Action**: Validates form (does NOT navigate in React SPA)

---

## Form Validation Rules

### Required Fields
All fields marked as "Required: Yes" must be filled before the "Start a new application" button becomes enabled.

### Dynamic Field Dependencies

**Product-Specific Fields**:
- "Illustration Upload Method" → Only for Manulife Par
- "Premium Duration" → Only for Manulife Par
- "Dividend Option" → Only for Manulife Par

**Coverage Type Options**:
- May vary based on product selection

### Auto-Calculated Fields
- **Insurance Age** → Calculated from Date of Birth

---

## Selector Strategies

### Role-Based (Preferred)
Use for all labeled fields:
```python
page.get_by_role("textbox", name="First name")
page.get_by_role("combobox", name="Illustrated smoking status")
page.get_by_role("radio", name="Male").first  # .first if duplicate names
```

### Parent Traversal (Unlabeled Radiogroups)
Use for questions without accessible radiogroup names:
```python
page.locator("text=Will the policy be issued in Quebec?") \
    .locator("..").get_by_role("radio", name="No")
```

### Index-Based Selection (Last Resort)
Only when necessary and with verification:
```python
coverage_dropdown.select_option(index=1)  # Verify option first
```

---

## Critical Discoveries

### 1. Selector Precision Required
**Bug Example**: `page.locator("select, [role='combobox']").filter(has_text="Select").first`
- Matched PRODUCT dropdown instead of smoking status
- Changed product from "Manulife Par" to "Family Term"
- Reset entire form structure

**Fix**: Always use explicit accessible names in `get_by_role()`

### 2. Single-Page React SPA
- URL never changes from `https://www.insurance.manulife.ca/dda/welcomeInformation`
- Content updates client-side
- Button click does NOT navigate to new page
- Validate by checking content presence, not URL

### 3. Form Enablement
- "Start a new application" button disabled until all required fields valid
- Visual indicators: Red borders and "Required" alerts for unfilled fields
- No inline validation during typing

---

## Field Count Summary

- **Textboxes**: 6 (First name, Last name, Middle initial, Day, Year, Amount of insurance)
- **Comboboxes**: 6 (Product, Month, Smoking status, Coverage type, Premium Duration, Dividend option)
- **Checkboxes**: 1 (Vitality Plus)
- **Radiogroups**: 6 (Illustration upload, Sex, Riders, Quebec, Additional products, Medical info)
- **Buttons**: 2 (Add insured, Start application)
- **Total Interactive Fields**: 21

**Required Fields**: 15
**Optional Fields**: 6
**Auto-Calculated**: 1 (Insurance age)

---

## Next Steps

1. ✅ Field catalog complete
2. TODO: Update `specifications/manulife-par-form.yaml` with discovered fields
3. TODO: Add product-specific field mappings (Par vs. Term vs. UL)
4. TODO: Define test data sets (valid, invalid, edge cases)
5. TODO: Implement page object class with these selectors
