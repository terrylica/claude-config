name: AI Agent Review Request
description: Human review request for AI agent test results (auto-generated)
title: "[Review] "
labels: ["needs-human-review"]
assignees:
  - terryli
body:
  - type: markdown
    attributes:
      value: |
        ## ü§ñ AI Agent Review Request

        This issue was automatically created by an AI coding agent for human review.
        The agent is **blocked** and waiting for your approval before proceeding.

        **To approve**: Comment with `approved` or `lgtm`
        **To reject**: Comment with `rejected` or `changes requested`

  - type: input
    id: test-name
    attributes:
      label: Test Name
      description: Name of the test that requires review
      placeholder: "e.g., Manulife PAR Form Fill - Stage 2"
    validations:
      required: true

  - type: dropdown
    id: test-type
    attributes:
      label: Test Type
      description: Type of test execution
      options:
        - reconnaissance
        - automation-dry-run
        - automation-live
    validations:
      required: true

  - type: dropdown
    id: trigger-reason
    attributes:
      label: Review Trigger
      description: Why was this review requested?
      options:
        - Visual Anomaly Detected
        - New Conditional Logic Discovered
        - Unknown Validation Error
        - Milestone Achievement
        - Manual Review Request
        - Pre-Submission Approval (Live Test)
    validations:
      required: true

  - type: textarea
    id: summary
    attributes:
      label: Test Summary
      description: Brief summary of test execution and results
      placeholder: |
        - Form filled successfully
        - All fields validated
        - No unexpected errors
        - Ready for next stage
    validations:
      required: true

  - type: textarea
    id: artifacts
    attributes:
      label: Artifacts
      description: Links to screenshots, logs, and traces
      placeholder: |
        **Screenshots**:
        ![Screenshot 1](https://raw.githubusercontent.com/tainora/insurance/COMMIT_SHA/path/screenshot.png)

        **Local Path**: `artifacts/2025-10-18_14-30-00/`

        **Findings**: See findings.json in artifacts directory
    validations:
      required: true

  - type: dropdown
    id: blocking
    attributes:
      label: Blocking Level
      description: Does this block further automation?
      options:
        - "üî¥ BLOCKING - AI is paused, urgent review needed"
        - "üü° IMPORTANT - Review soon, but AI can continue"
        - "üü¢ INFORMATIONAL - Review at convenience"
      default: 0
    validations:
      required: true

  - type: checkboxes
    id: pre-submission-checklist
    attributes:
      label: Pre-Submission Checklist (AI Agent)
      description: AI agent verifies these before creating issue
      options:
        - label: PII properly masked in screenshots
          required: true
        - label: All artifacts uploaded to artifacts branch
          required: true
        - label: Test completed without fatal errors
          required: true
        - label: Artifacts directory indexed in manifest
          required: true

  - type: checkboxes
    id: human-review-checklist
    attributes:
      label: Human Review Checklist
      description: Please verify before approving
      options:
        - label: Screenshots reviewed - no exposed PII
        - label: Test results match expectations
        - label: No unexpected behaviors or errors
        - label: Safe to proceed with next stage

  - type: markdown
    attributes:
      value: |
        ---

        ## Approval Instructions

        **To approve and unblock the AI agent**:
        Comment on this issue with one of:
        - `approved`
        - `lgtm` (looks good to me)
        - `looks good`
        - ‚úÖ (checkmark emoji)

        **To reject and halt the AI agent**:
        Comment with one of:
        - `rejected`
        - `reject`
        - `changes requested`
        - `not approved`
        - ‚ùå (X emoji)

        The AI agent polls this issue every 30 seconds for your response.
