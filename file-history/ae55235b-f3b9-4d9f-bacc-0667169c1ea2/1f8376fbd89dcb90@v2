#!/bin/bash
# Set up SSH keys for terryli user

set -e

echo "Setting up SSH access for terryli user..."
echo

# Create .ssh directory for terryli
echo "Creating .ssh directory..."
sudo mkdir -p /home/terryli/.ssh

# Copy authorized_keys from yca to terryli
echo "Copying SSH keys from yca to terryli..."
sudo cp ~/.ssh/authorized_keys /home/terryli/.ssh/

# Set proper ownership
echo "Setting ownership..."
sudo chown -R terryli:terryli /home/terryli/.ssh

# Set proper permissions
echo "Setting permissions..."
sudo chmod 700 /home/terryli/.ssh
sudo chmod 600 /home/terryli/.ssh/authorized_keys

echo
echo "Verification:"
ls -la /home/terryli/.ssh/

echo
echo "âœ“ SSH setup complete!"
echo
echo "Test from macOS with:"
echo "  ssh terryli@172.25.236.1"
