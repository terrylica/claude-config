#!/bin/bash
# Test OSC 52 clipboard support in Ghostty

echo "Testing OSC 52 clipboard support..."
echo ""

# Test 1: Simple text
echo "Test 1: Copying 'Hello from OSC 52!' to clipboard..."
printf '\033]52;c;%s\007' "$(echo -n 'Hello from OSC 52!' | base64)"
echo ""
echo "âœ… Data sent. Now paste (âŒ˜V) to verify."
echo ""

# Wait for user
read -p "Press Enter after you've verified the paste works..."
echo ""

# Test 2: Multi-line text
echo "Test 2: Copying multi-line text..."
printf '\033]52;c;%s\007' "$(printf 'Line 1\nLine 2\nLine 3' | base64)"
echo ""
echo "âœ… Data sent. Paste to verify you get 3 lines."
echo ""

read -p "Press Enter after you've verified..."
echo ""

# Test 3: With tmux wrapper (if in tmux)
if [ -n "$TMUX" ]; then
    echo "Test 3: Testing with tmux wrapper..."
    printf "\033Ptmux;\033\033]52;c;%s\007\033\\" "$(echo -n 'Tmux OSC 52 works!' | base64)"
    echo ""
    echo "âœ… Data sent through tmux. Paste to verify."
else
    echo "Test 3: Not in tmux, skipping tmux-specific test."
fi

echo ""
echo "ðŸŽ‰ All tests complete!"
