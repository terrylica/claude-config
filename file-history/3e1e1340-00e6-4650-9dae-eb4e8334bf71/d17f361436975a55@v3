# V1.5 Harsh Mode: 2-Year Backtest Analysis

**Date:** October 1, 2025
**Test Period:** October 1, 2023 - September 7, 2025 (~707 days / ~23 months)
**Data:** 116,368 funding rate records, 56 OKX USDT perpetuals

---

## üéØ Executive Summary

**Critical Finding:** The strategy is **highly regime-dependent** and underperforms under harsh cost assumptions.

| Period | APY | Final Equity | Borrow Costs | Sharpe | Assessment |
|--------|-----|--------------|--------------|--------|------------|
| **3 months** (Jun-Oct 2025) | 34.63% | 1.0825 | 3.21% | 12.25 | ‚úÖ Good recent performance |
| **2 years** (Oct 2023-Sep 2025) | **11.24%** | 1.229 | **23.13%** | 11.27 | ‚ö†Ô∏è **Marginal long-term** |

**Verdict:** ‚ö†Ô∏è **DO NOT DEPLOY WITHOUT REDUCING BORROW COSTS**

---

## üìä Performance Breakdown

### 2-Year Results (V1.5 Harsh)

**Returns:**
- Final equity: 1.229 (22.9% total return)
- APY (CAGR): **11.24%**
- Sharpe Ratio: 11.27
- Max drawdown: Modest (chart shows no major crashes)

**Cost Breakdown:**
| Cost Component | Amount | % of Starting Capital | Annualized Impact |
|----------------|--------|----------------------|-------------------|
| **Borrow costs** | 23.13% | 23.13% | **~12 pp APY** |
| **Slippage** | 1.48% | 1.48% | ~0.77 pp APY |
| **Missed hedges** | 0.42% | 0.42% | ~0.22 pp APY |
| **Operational skips** | 12 events | - | Minimal |
| **Total Drag** | **~25%** | **~25%** | **~13 pp APY** |

---

## üîç Regime Analysis

The equity curve reveals **three distinct regimes:**

### 1. **Strong Regime (Oct 2023 - Apr 2024)** ‚úÖ
- Duration: ~6 months
- Equity: 1.0 ‚Üí 1.14 (+14%)
- Estimated APY: ~30%+
- **Characteristics**: Funding rates highly favorable, clear trends

### 2. **Weak Regime (Apr 2024 - Dec 2024)** ‚ùå
- Duration: ~8 months
- Equity: Flat at ~1.14-1.15
- Estimated APY: ~0-2% (barely covering borrow costs)
- **Characteristics**: Low/unstable funding rates, high mean reversion

### 3. **Strong Regime (Jan 2025 - Sep 2025)** ‚úÖ
- Duration: ~9 months
- Equity: 1.15 ‚Üí 1.23 (+8%)
- Estimated APY: ~11-12%
- **Characteristics**: Moderate funding rate opportunities

**Key Insight:** The 3-month test (June-Oct 2025) captured only Regime 3, explaining the higher 34.63% APY.

---

## üí∞ Borrow Cost Catastrophe

**The primary issue:** Borrow costs are **linear and relentless**, accumulating regardless of market conditions.

### Borrow Cost Growth Over Time

| Period | Cumulative Borrow | Annualized Rate |
|--------|-------------------|----------------|
| 3 months (Jun-Oct 25) | 3.21% | ~13 pp APY |
| 6 months | ~6% | ~12 pp APY |
| 12 months | ~12% | ~12 pp APY |
| 24 months | **23.13%** | **~12 pp APY** |

**Problem:** Even in weak regimes where the strategy earns 0-2% APY, borrow costs continue at ~1% per month.

**Comparison to V1.5 Assumptions:**
- **Assumed:** BTC 4% APR, Alts 12% APR (conservative floors)
- **Reality check needed:** Are these assumptions too harsh?
- **Breakeven:** Strategy needs >13% gross APY just to cover borrow costs

---

## üìà Comparison: 3-Month vs 2-Year

| Metric | 3-Month Test | 2-Year Test | Difference |
|--------|--------------|-------------|------------|
| **APY** | 34.63% | 11.24% | **-23.39 pp** ‚ùå |
| **Final Equity** | 1.0825 | 1.229 | - |
| **Borrow Costs** | 3.21% | 23.13% | Linear scaling ‚úì |
| **Slippage** | 1.02% | 1.48% | Slightly higher |
| **Period Captured** | Strong regime only | Mixed regimes | - |
| **Sharpe** | 12.25 | 11.27 | Similar volatility-adjusted |

**Why the massive difference?**
1. **Regime bias:** 3-month test only captured strong market
2. **Time horizon:** Borrow costs compound over time
3. **Mean reversion:** Strategy suffers in low-volatility periods

---

## üö® Critical Issues Identified

### 1. **Borrow Costs Are Unsustainable**

At 12 pp APY borrow drag, the strategy needs:
- **Minimum gross APY:** 13% (just to break even)
- **Target gross APY:** 25%+ (to achieve 12% net)

**Current gross performance:** ~24% APY
- Net after borrow: ~11-12% APY
- **Barely acceptable** for the risk

### 2. **Regime Dependence Is High**

The strategy performs wildly differently across market conditions:
- **Strong regime:** 20-30% APY
- **Weak regime:** 0-5% APY

**Without regime detection/avoidance**, long-term APY will average to ~11-12%.

### 3. **Harsh Assumptions May Be Too Conservative**

Current assumptions:
- BTC borrow: 4% APR
- Alts borrow: 12% APR
- 100% taker execution
- 3 bps slippage

**Reality check needed:**
- What are **actual** OKX borrow rates?
- Can we get better execution than 100% taker?
- Is 3 bps slippage realistic with limit orders?

---

## üîß Sensitivity Analysis

### Impact of Lower Borrow Costs

**If actual borrow costs are lower:**

| Scenario | BTC APR | Alts APR | Est. Drag | Est. Net APY | Verdict |
|----------|---------|----------|-----------|--------------|---------|
| **Current (Harsh)** | 4% | 12% | 12 pp | 11.24% | ‚ö†Ô∏è Marginal |
| **Moderate** | 2% | 6% | 6 pp | **~17%** | ‚úÖ Acceptable |
| **Optimistic** | 1% | 3% | 3 pp | **~21%** | ‚úÖ Good |

**Action Item:** Verify actual OKX borrow rates across market conditions!

### Impact of Better Execution

**If we achieve 60/40 maker/taker (like Victor assumed):**

Current execution cost: ~1.5% total
Improved execution: ~0.5% total
**Savings:** ~1 pp APY

Combined with moderate borrow (6 pp drag instead of 12 pp):
- **Net APY:** ~18% (vs current 11.24%)
- **Verdict:** ‚úÖ Deployable

---

## üìä Decision Matrix

| 2-Year Harsh Result | Live Expectation | Recommendation | Allocation |
|---------------------|------------------|----------------|------------|
| **>20% APY** | 25-30% APY | Deploy with high confidence | 100% |
| **15-20% APY** | 20-25% APY | Deploy with normal allocation | 75-100% |
| **10-15% APY** | 15-20% APY | ‚ö†Ô∏è **Deploy only if costs validated** | **25-50%** |
| **<10% APY** | <15% APY | ‚ùå Do not deploy | 0% |

**Actual 2-Year Result: 11.24% APY**

**Current recommendation:** ‚ö†Ô∏è **Conditional deployment**
- **IF** actual borrow costs are <6% APR average: ‚úÖ Deploy 50-75%
- **IF** borrow costs are 6-10% APR: ‚ö†Ô∏è Deploy 25% (test)
- **IF** borrow costs are >10% APR: ‚ùå Skip, build V2 first

---

## üéØ Revised Deployment Strategy

### Phase 0: Validate Borrow Cost Assumptions (**CRITICAL**)

**Before any deployment:**

1. **Check actual OKX borrow rates** for our symbols
   - Query real-time rates
   - Review historical average (past 6 months)
   - Identify BTC vs alt coin rates

2. **Calculate realistic blended rate:**
   - Portfolio weight: ~20-30% BTC, 70-80% alts
   - Blended borrow = (0.25 √ó BTC_rate) + (0.75 √ó Alt_rate)

3. **Decision criteria:**
   - If blended < 6%: ‚úÖ Proceed to Phase 1
   - If blended 6-10%: ‚ö†Ô∏è Proceed cautiously with small allocation
   - If blended > 10%: ‚ùå Do not deploy

### Phase 1: Paper Trading (2 weeks)

**Goals:**
- Validate actual borrow costs vs assumptions
- Measure execution quality (maker vs taker ratio)
- Verify slippage is <3 bps with limit orders

**Expected outcomes:**
- Borrow costs: 4-8% blended (vs 12% assumed)
- Execution: 50/50 to 60/40 maker/taker (vs 100% taker assumed)
- Net APY projection: 15-20% (vs 11.24% harsh)

### Phase 2: Live Deployment (If Phase 1 validates)

**Initial allocation:** $10-25k
- Conservative start
- Monitor for 4 weeks
- Compare to backtest expectations

**Scale-up criteria:**
- If actual APY >20%: Scale to 100%
- If actual APY 15-20%: Scale to 75%
- If actual APY 10-15%: Hold at 25%, investigate
- If actual APY <10%: Exit, costs too high

---

## üí° Key Takeaways

### What We Learned

1. **3-month tests can be misleading**
   - Captured only strong regime
   - Underestimated regime risk
   - Need multi-year validation

2. **Borrow costs are the #1 enemy**
   - 23.13% drag over 2 years
   - Dwarfs all other costs combined
   - Must validate assumptions before deploying

3. **Strategy is regime-dependent**
   - Strong markets: 20-30% APY
   - Weak markets: 0-5% APY
   - Long-term average: ~11-12% APY (harsh costs)

4. **Harsh mode may be TOO harsh**
   - 4% BTC, 12% alts may be overly conservative
   - 100% taker is pessimistic
   - Real performance likely 15-20% APY

### Next Steps

**Immediate actions:**

1. ‚úÖ **Validate borrow costs** (highest priority)
   - Query OKX API for current rates
   - Calculate realistic blended rate
   - Update backtest with real rates

2. ‚è∏Ô∏è **Hold deployment** until borrow validation
   - Do NOT deploy blindly assuming 11% APY is acceptable
   - Risk/reward only favorable if costs are lower

3. üî¨ **Run sensitivity analysis**
   - Backtest with 2%, 4%, 6%, 8% blended borrow
   - Identify breakeven borrow rate
   - Set deployment criteria

4. üìä **Consider V2 predictive upgrade**
   - If costs validate but APY is 15-18%
   - V2 could add 5-10 pp APY
   - Worth 8-week investment

---

## üìÅ Files Generated

- **Equity curve:** `okx_funding_arb_v1_5_harsh_chart.png`
- **Results CSV:** `okx_funding_arb_v1_5_harsh_results.csv`
- **Historical data:** `data/okx_funding_2year_daily.csv` (116,368 records)

---

## üéì Lessons for Future Backtests

1. **Always test on multi-year data** (not just recent history)
2. **Conservative cost assumptions are good, but validate them**
3. **Regime analysis is crucial** for market-neutral strategies
4. **Borrow costs scale linearly** - verify assumptions early
5. **Don't confuse recent performance with long-term expectation**

---

**Status:** ‚ö†Ô∏è Strategy requires validation of borrow cost assumptions before deployment.

**Recommendation:** Immediately query OKX API for actual borrow rates, then re-run backtest with realistic costs.

**Timeline:** 2-3 days for validation ‚Üí Deploy or pivot decision
