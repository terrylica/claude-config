# Doppler Secrets Documentation

**Project**: claude-config
**Config**: dev
**Last Updated**: 2025-10-23

## Telegram API Credentials

### TELEGRAM_API_ID

**Value**: `18256514`

**Source**:

- 1Password vault: `wpfne3qtonqfhark5nmofg2cq4`
- Created at: https://my.telegram.org/apps
- App title: ccnotice
- Short name: udfam

**Purpose**:
Telegram API identifier for Lychee Link Autofix automation. Required by pytdbot client for authentication with Telegram's TDLib.

**Usage**:

- Phase 0: One-time authentication (`auth-telegram.py`)
- Phase 1: Bot creation (`create-bot-automated.py`)
- Phase 2+: Automated link fixing operations

**Associated Resources**:

- Telegram Account: EonLabsOperations
- Phone Number: +1 604 300 8878
- Session File: `~/.telegram-session`
- SSoT: `/Users/terryli/.claude/specifications/link-validation-autofix-system.yaml`

**Security**:

- Stored in Doppler: claude-config/dev
- Backed up in 1Password: wpfne3qtonqfhark5nmofg2cq4
- Type: Public identifier (not sensitive, but paired with hash)

### TELEGRAM_API_HASH

**Value**: `4b812166a74fbd4eaadf5c4c855926`

**Source**:

- 1Password vault: `wpfne3qtonqfhark5nmofg2cq4`
- Created at: https://my.telegram.org/apps
- App title: ccnotice
- Short name: udfam

**Purpose**:
Telegram API hash for Lychee Link Autofix automation. Secret credential paired with API ID for TDLib authentication.

**Usage**:

- Phase 0: One-time authentication (`auth-telegram.py`)
- Phase 1: Bot creation (`create-bot-automated.py`)
- Phase 2+: Automated link fixing operations

**Associated Resources**:

- Telegram Account: EonLabsOperations
- Phone Number: +1 604 300 8878
- Session File: `~/.telegram-session`
- SSoT: `/Users/terryli/.claude/specifications/link-validation-autofix-system.yaml`

**Security**:

- Stored in Doppler: claude-config/dev
- Backed up in 1Password: wpfne3qtonqfhark5nmofg2cq4
- Type: Secret (treat as password)
- Visibility: Masked in Doppler dashboard

## MTProto Server Information

**Test Configuration**:

- Server: 149.154.167.40:443
- Datacenter: DC 2

**Production Configuration**:

- Server: 149.154.167.50:443
- Datacenter: DC 2

**Public Keys**: Available in Telegram API configuration (not stored separately)

## Access Pattern

**Retrieve secrets via Doppler CLI**:

```bash
export TELEGRAM_API_ID=$(doppler secrets get TELEGRAM_API_ID --plain -p claude-config -c dev)
export TELEGRAM_API_HASH=$(doppler secrets get TELEGRAM_API_HASH --plain -p claude-config -c dev)
```

**Or run with Doppler**:

```bash
doppler run -p claude-config -c dev -- uv run auth-telegram.py
```

## NOCT (Note Of Critical Thought)

**Critical Path Dependencies**:

1. API credentials → TDLib authentication → Session file
2. Session file → Bot creation → BotFather interaction
3. Bot token → Link fixing automation

**Single Point of Failure**:

- Doppler unavailable → Cannot authenticate → Automation halts
- Mitigation: 1Password backup, session file persists after initial auth

**Observability**:

- Doppler audit log tracks secret access
- Scripts output credential validation status
- Session file existence indicates successful auth

**Maintainability**:

- Credentials never expire (Telegram design)
- Regeneration requires new app at my.telegram.org/apps
- Session file persists indefinitely (revokable via Telegram app)

### TELEGRAM_BOT_TOKEN

**Value**: (Generated by `create-bot-automated.py`)

**Source**:

- Generated by: @BotFather via automated script
- Bot name: Lychee Link Autofix Bot
- Bot username: @lychee_link_autofix_bot

**Purpose**:
Bot authentication token for sending messages. Used to send link validation notifications and receive approval callbacks via polling.

**Usage**:

- Phase 0: Webhook registration
- Phase 1+: Send notifications to user
- Phase 2+: Receive approval callbacks

**Associated Resources**:

- Bot created via: `/Users/terryli/.claude/automation/lychee/create-bot-automated.py`
- Webhook handler: (to be created in Phase 1)
- SSoT: `/Users/terryli/.claude/specifications/link-validation-autofix-system.yaml`

**Security**:

- Stored in Doppler: claude-config/dev
- Type: Secret (treat as password)
- Visibility: Masked in Doppler dashboard
- Regeneration: Run `create-bot-automated.py` with different bot username

### TELEGRAM_CHAT_ID

**Value**: (Retrieved by `create-bot-automated.py`)

**Source**:

- Retrieved from: Telegram API after bot creation
- Identifies: Chat between user and bot

**Purpose**:
Chat identifier for sending messages to specific user. Required for all bot.sendMessage operations.

**Usage**:

- Phase 1+: Target for all bot notifications
- Required for: Inline keyboard callbacks

**Associated Resources**:

- Bot username: @lychee_link_autofix_bot
- User account: EonLabsOperations
- SSoT: `/Users/terryli/.claude/specifications/link-validation-autofix-system.yaml`

**Security**:

- Stored in Doppler: claude-config/dev
- Type: Public identifier (not sensitive)
- Static: Remains constant for bot-user pair

## Change Log

| Version | Date | Change | Rationale |
| --- | --- | --- | --- |
| 1.0.0 | 2025-10-23 | Initial credential setup | Phase 0 implementation |
| 1.1.0 | 2025-10-23 | Add bot token and chat ID placeholders | Phase 0 bot creation preparation |
