#!/bin/bash
# GitHub Flavored Markdown Link Checker - Global Command Wrapper

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Determine project directory based on installation location
if [[ "$SCRIPT_DIR" == *"/.local/bin" ]]; then
    # Installed via installer - use fixed path
    PROJECT_DIR="$HOME/.claude/tools/gfm-link-checker"
else
    # Running from workspace - use relative path
    PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
fi

# Run the checker from project directory but preserve current working directory
exec uv run --directory "$PROJECT_DIR" "$PROJECT_DIR/gfm_link_checker.py" "$@"